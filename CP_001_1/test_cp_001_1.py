from selenium.webdriver.common.by import By
from src.testproject.classes import DriverStepSettings, StepSettings
from src.testproject.decorator import report_assertion_errors
from src.testproject.enums import SleepTimingType
from src.testproject.sdk.drivers import webdriver
import pytest


"""
This pytest test was automatically generated by TestProject
    Project: My first Project
    Package: TestProject.Generated.Tests.MyFirstProject
    Test: CP-001-1
    Generated by: Ruben Rodriguez (rdrm.05@gmail.com)
    Generated on 07/14/2021, 22:15:03
"""


@pytest.fixture()
def driver():
    driver = webdriver.Chrome(token="jAoYsZdMEgRqqPtB0JkVcHYdA_A0iOGbXoFE-wqhxVk",
                              project_name="My first Project",
                              job_name="CP-001-1")
    step_settings = StepSettings(timeout=15000,
                                 sleep_time=500,
                                 sleep_timing_type=SleepTimingType.Before)
    with DriverStepSettings(driver, step_settings):
        yield driver
    driver.quit()


@report_assertion_errors
def test_main(driver):
    """Vaciar carrito."""
    # Test Parameters
    # Auto generated application URL parameter
    ApplicationURL = "https://www.google.com/"

    # 1. Navigate to '{ApplicationURL}'
    # Navigates the specified URL (Auto-generated)
    driver.get(f'{ApplicationURL}')

    # 2. Navigate to 'https://ecommercetest.local/'
    driver.get("https://ecommercetest.local/")

    # 3. Click 'Shop'
    shop = driver.find_element(By.XPATH,
                               "//div[1]/ul//a[. = 'Shop']")
    shop.click()

    # 4. Scroll window by ('0','300')
    driver.execute_script("window.scrollBy(0,300)")

    # 5. Scroll window by ('0','200')
    driver.execute_script("window.scrollBy(0,200)")

    # 6. Click 'Add to cart'
    add_to_cart = driver.find_element(By.XPATH,
                                      "//li[1]/a[. = 'Add to cart']")
    add_to_cart.click()

    # 7. Scroll window by ('0','-400')
    driver.execute_script("window.scrollBy(0,-400)")

    # 8. Scroll window by ('0','-100')
    driver.execute_script("window.scrollBy(0,-100)")

    # 9. Click '$3000 1 item'
    _3000_1_item = driver.find_element(By.XPATH,
                                       "//a[. = '\n\t\t\t\t\t\t\t\t$3000 1 item\n\t\t\t']")
    _3000_1_item.click()

    # 10. Scroll window by ('0','200')
    driver.execute_script("window.scrollBy(0,200)")

    # 11. Scroll window by ('0','200')
    driver.execute_script("window.scrollBy(0,200)")

    # 12. Scroll window by ('0','100')
    driver.execute_script("window.scrollBy(0,100)")

    # 13. Scroll window by ('0','100')
    driver.execute_script("window.scrollBy(0,100)")

    # 14. Scroll window by ('0','100')
    driver.execute_script("window.scrollBy(0,100)")

    # 15. Click 'Empty cart'
    empty_cart = driver.find_element(By.CSS_SELECTOR,
                                     "#prowc_empty_cart")
    empty_cart.click()

    # 16. Scroll window by ('0','100')
    driver.execute_script("window.scrollBy(0,100)")

    # 17. Click 'Your cart is currently empty.'
    your_cart_is_currently_empty_ = driver.find_element(By.XPATH,
                                                        "//p[. = 'Your cart is currently empty.']")
    your_cart_is_currently_empty_.click()
